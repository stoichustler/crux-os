#
# The roux on crux hypervisor (on process)
#
CONFIG_ARCH="arm64"
CONFIG_ARCH_ARM64=y
CONFIG_ARCH_BOARD="crux-gvm"
CONFIG_ARCH_BOARD_CRUX_GVM=y
CONFIG_ARCH_CHIP="crux"
CONFIG_ARCH_CHIP_CRUX=y
CONFIG_ARCH_CHIP_CRUX_A53=y
CONFIG_ARCH_CHIP_CRUX_WITH_HV=y
CONFIG_ARM64_GIC_VERSION=3

# Memory support
CONFIG_GRAN=y
CONFIG_MM_PGALLOC=y

# CONFIG_ARCH_EARLY_PRINT=y
CONFIG_ARCH_INTERRUPTSTACK=8192
CONFIG_ARCH_STACKDUMP=y
CONFIG_ARM64_STRING_FUNCTION=y
CONFIG_BENCHMARK_OSPERF=y
CONFIG_BOARDCTL_POWEROFF=y
CONFIG_BOARDCTL_RESET=y
CONFIG_BOARD_ASSERT_RESET_VALUE=2
CONFIG_BOARD_RESET_ON_ASSERT=2
CONFIG_BUILTIN=y
CONFIG_COVERAGE_ALL=y
CONFIG_COVERAGE_MINI=y

# Timer setup
CONFIG_TIMER=y

# Debug Information
CONFIG_DEBUG_ASSERTIONS=y
CONFIG_DEBUG_FEATURES=y
CONFIG_DEBUG_FULLOPT=y
CONFIG_DEBUG_SCHED=y
CONFIG_DEBUG_SCHED_ERROR=y
CONFIG_DEBUG_SCHED_WARN=y
# CONFIG_DEBUG_SCHED_INFO=y
CONFIG_DEBUG_SYMBOLS=y

# Other Configuration
CONFIG_DEFAULT_TASK_STACKSIZE=16384
CONFIG_EXAMPLES_HELLO=y
CONFIG_EXPERIMENTAL=y
CONFIG_FRAME_POINTER=y
CONFIG_FS_PROCFS=y
CONFIG_FS_PROCFS_REGISTER=y
CONFIG_FS_ROMFS=y
CONFIG_FS_TMPFS=y
CONFIG_HAVE_CXXINITIALIZE=y
CONFIG_IDLETHREAD_STACKSIZE=16384
CONFIG_INIT_ENTRYPOINT="nsh_main"
CONFIG_INTELHEX_BINARY=y
CONFIG_LIBC_EXECFUNCS=y
CONFIG_LIBC_MEMFD_ERROR=y
CONFIG_NSH_ARCHINIT=y
CONFIG_NSH_BUILTIN_APPS=y
CONFIG_NSH_FILEIOSIZE=512
CONFIG_NSH_READLINE=y
CONFIG_PIPES=y
CONFIG_PREALLOC_TIMERS=4
CONFIG_PTHREAD_STACK_MIN=16384

# RAM 64MB
CONFIG_RAMLOG=y
CONFIG_RAM_SIZE=67108864
CONFIG_RAM_START=0x40000000
CONFIG_RAW_BINARY=y
CONFIG_READLINE_CMD_HISTORY=y
CONFIG_RR_INTERVAL=200
CONFIG_SCHED_BACKTRACE=y
CONFIG_SCHED_HPWORK=y
CONFIG_SCHED_HPWORKPRIORITY=192
CONFIG_SMP=y
CONFIG_SMP_NCPUS=2
CONFIG_STACK_COLORATION=y
CONFIG_START_MONTH=7
CONFIG_START_YEAR=2025
CONFIG_SYMTAB_ORDEREDBYNAME=y

CONFIG_SYSTEM_GCOV=y
CONFIG_SYSTEM_NSH=y
CONFIG_SYSTEM_SYSTEM=y
CONFIG_SYSTEM_TASKSET=y
CONFIG_SYSTEM_TIME64=y
CONFIG_SYSTEM_CPULOAD=y
CONFIG_SYSTEM_VI=y
CONFIG_SYSTEM_HEX2BIN=y
CONFIG_SYSTEM_DUMPSTACK=y

CONFIG_SYSTEM_READLINE=y
CONFIG_READLINE_HAVE_EXTMATCH=y
CONFIG_READLINE_TABCOMPLETION=y
CONFIG_READLINE_CMD_HISTORY=y

# Testing
CONFIG_TESTING_GETPRIME=y
CONFIG_TESTING_OSTEST=y
CONFIG_TESTING_OSTEST_STACKSIZE=16384
CONFIG_TESTING_SMP=y
# CONFIG_TESTING_CACHETEST=y
CONFIG_TESTING_MEMORY_STRESS=y
CONFIG_TESTING_RAMTEST=y
# CONFIG_TESTING_HEAP=y

# Uart configuration
CONFIG_UART_PL011=y
CONFIG_UART1_BASE=0x22000000
CONFIG_UART1_IRQ=32
CONFIG_UART1_PL011=y
CONFIG_UART1_SERIAL_CONSOLE=y

CONFIG_USEC_PER_TICK=1000

# Virtio configuration
CONFIG_DRIVERS_VIRTIO_MMIO=y
CONFIG_DRIVERS_VIRTIO_BLK=y
CONFIG_DRIVERS_VIRTIO_PCI=y
CONFIG_DRIVERS_VIRTIO_SND=y
CONFIG_DRIVERS_VIRTIO_SERIAL=y

# System Logging
CONFIG_SYSLOG=y
CONFIG_SYSLOG_BUFFER=y
CONFIG_SYSLOG_DEFAULT=y

# Benchmark
CONFIG_BENCHMARK_CYCLICTEST=y
CONFIG_BENCHMARK_RAMSPEED=y
CONFIG_BENCHMARK_TINY_MEMBENCH=y
CONFIG_BENCHMARK_DHRYSTONE=y
CONFIG_BENCHMARK_COREMARK=y
